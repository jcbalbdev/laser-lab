---
import Layout from "../layouts/Layout.astro";
import Bannerimagenfull from "../components/Bannerimagenfull.astro";
import NavInterno from "../components/NavInterno.astro";

const servicesData = {
  aves: {
    title: "AVES",
    categories: [
      {
        title: "MICROBIOLOGÍA",
        subsections: [
          {
            title: "CASOS CLÍNICOS",
            items: [
              {
                label: "CULTIVO BACTERIANO",
                desc: "Escherichia coli, Salmonella, Clostridium, Avibacterium, Gallibacterium, etc.",
              },
              {
                label: "ANTIBIOGRAMA",
                desc: "Aerobio, anaerobio, microaerófilo.",
              },
              {
                label: "CULTIVO DE HONGOS",
                desc: "Aspergillus, Rhizopus, Candida, etc.",
              },
            ],
          },
          {
            title: "MONITOREO",
            items: [
              {
                label: "Microbiológico de pollito bb",
                desc: "(en planta de incubación, ingreso a granja) de microorganismos de interés.",
              },
              {
                label: "Monitoreo Salmonella",
                desc: "(planta de incubación, granja, planta de faenamiento).",
              },
              {
                label: "Monitoreo microbiológico de planta de incubación",
                desc: "(plaqueo ambiental, superficies, lavado de manos, etc.) de microorganismos de interés.",
              },
              {
                label: "Microbiología de alimentos e insumos",
                desc: "(mesófilos, coliformes, hongos, Staphylococcus, Salmonella, etc.).",
              },
              {
                label: "Microbiología de agua",
                desc: "(heterótrofos, coliformes, E. coli, Pseudomonas, hongos, etc.).",
              },
            ],
          },
        ],
      },
      {
        title: "SEROLOGÍA",
        subsections: [
          {
            title: "ELISA",
            items: [
              {
                label: "Bacterias",
                desc: "ELISA Mycoplasma gallisepticum, Mycoplasma synoviae, Salmonella, etc.",
              },
              {
                label: "Virus",
                desc: "ELISA Influenza aviar, Newcastle, Bronquitis infecciosa, Gumboro, Reovirus, Anemia aviar, etc.",
              },
              { label: "Micotoxinas", desc: "(varios)" },
            ],
          },
          {
            title: "INHIBICIÓN DE LA HEMAGLUTINACIÓN",
            items: [
              {
                label: "Virus",
                desc: "Virus de la Enfermedad de Newcastle, Virus de Influenza H5N2.",
              },
            ],
          },
        ],
      },
      {
        title: "BIOLOGÍA MOLECULAR",
        subsections: [
          {
            title: "PCR",
            items: [
              {
                label: "Bacterias",
                desc: "PCR Mycoplasma, Avibacterium (Coriza infecciosa), Salmonella, etc.",
              },
              {
                label: "Virus",
                desc: "PCR Influenza aviar, Newcastle, Bronquitis infecciosa, Gumboro, Reovirus, Hepatitis, etc.",
              },
            ],
          },
        ],
      },
      {
        title: "GENÓMICA Y BIOINFORMÁTICA",
        subsections: [
          {
            title: "AVES DE CORRAL Y PORCINOS",
            items: [
              {
                label: "Bacterias",
                desc: "Secuenciación para análisis filogenético, identificación de genotipos y/o linajes, serotipos, genes de virulencia y resistencia a antibióticos.",
              },
              {
                label: "Virus",
                desc: "Secuenciación para análisis filogenético, identificación de genotipos y/o linajes.",
              },
            ],
          },
        ],
      },
      {
        title: "PARASITOLOGÍA",
        subsections: [
          {
            title: "AVES DE CORRAL",
            items: [
              { label: "Recuento de ooquistes de Eimeria", desc: "" },
              { label: "Score de lesiones intestinales", desc: "" },
            ],
          },
        ],
      },
    ],
  },
  porcinos: {
    title: "PORCINOS",
    categories: [
      {
        title: "MICROBIOLOGÍA",
        subsections: [
          {
            title: "CASOS CLÍNICOS",
            items: [
              {
                label: "Cultivo bacteriano",
                desc: "Escherichia coli, Salmonella, Clostridium, Glaesserella parasuis, Actinobacillus pleuropneumoniae, Streptococcus, Pasteurella, Bordetella, etc.",
              },
              {
                label: "Antibiograma",
                desc: "Aerobio, anaerobio, microaerófilo.",
              },
            ],
          },
          {
            title: "MONITOREO",
            items: [
              {
                label: "Monitoreo microbiológico de instalaciones",
                desc: "(plaqueo ambiental, superficies, lavado de manos, etc.) de microorganismos de interés.",
              },
              {
                label: "Microbiología de alimentos e insumos",
                desc: "(mesófilos, coliformes, hongos, Staphylococcus, Salmonella, etc.).",
              },
              {
                label: "Microbiología de agua",
                desc: "(heterótrofos, coliformes, E. coli, Pseudomonas, hongos, etc.).",
              },
            ],
          },
        ],
      },
      {
        title: "SEROLOGÍA",
        subsections: [
          {
            title: "ELISA",
            items: [
              {
                label: "Bacterias",
                desc: "ELISA Mycoplasma hyopneumoniae, Actinobacillus pleuropneumoniae, etc.",
              },
              {
                label: "Virus",
                desc: "ELISA PRRS, Cólera Porcino, Circovirus porcino tipo 2, Influenza tipo A, etc.",
              },
              { label: "Micotoxinas", desc: "(varios)" },
            ],
          },
        ],
      },
      {
        title: "BIOLOGÍA MOLECULAR",
        subsections: [
          {
            title: "PCR",
            items: [
              {
                label: "Bacterias",
                desc: "PCR Mycoplasma, Salmonella, Glaesserella, Actinobacillus, Lawsonia, etc.",
              },
              {
                label: "Virus",
                desc: "PCR PRRS, PED, PDCoV, TGE, Cólera Porcino, Circovirus porcino tipo 2 y tipo 3, Influenza, etc.",
              },
            ],
          },
        ],
      },
      {
        title: "GENÓMICA Y BIOINFORMÁTICA",
        subsections: [
          {
            title: "AVES DE CORRAL Y PORCINOS",
            items: [
              {
                label: "Bacterias",
                desc: "Secuenciación para análisis filogenético, identificación de genotipos y/o linajes, serotipos, genes de virulencia y resistencia a antibióticos.",
              },
              {
                label: "Virus",
                desc: "Secuenciación para análisis filogenético, identificación de genotipos y/o linajes.",
              },
            ],
          },
        ],
      },
      {
        title: "PARASITOLOGÍA",
        subsections: [
          {
            title: "PORCINOS",
            items: [
              { label: "Coproparasitología", desc: "" },
              { label: "PCR Cystoisospora suis", desc: "" },
            ],
          },
        ],
      },
    ],
  },
  otros: {
    title: "OTROS",
    categories: [
      {
        title: "AVES DE CORRAL Y MAMÍFEROS",
        subsections: [
          {
            title: "PATOLOGÍA",
            items: [
              { label: "Necropsia", desc: "" },
              { label: "Histopatología", desc: "" },
            ],
          },
          {
            title: "EVALUACIÓN DE DESINFECTANTES",
            items: [
              { label: "Prueba de dilución en uso", desc: "" },
              { label: "Prueba de corrosión", desc: "" },
            ],
          },
          {
            title: "EVALUACIÓN FISICOQUÍMICA DEL AGUA",
            items: [
              {
                label: "Parámetros",
                desc: "pH, dureza, sólidos, metales, aniones, etc.",
              },
            ],
          },
          {
            title: "PRUEBAS DE SENSIBILIDAD DE ANTIMICROBIANOS",
            items: [
              { label: "Preparación de discos de antibióticos", desc: "" },
              { label: "Prueba de potencia antibiótica", desc: "" },
              {
                label: "Kirby Bauer y Concentración mínima inhibitoria",
                desc: "",
              },
            ],
          },
        ],
      },
    ],
  },
};
---

<Layout title="Laboratorio Laser - Servicios">
  <main class="main-content">
    <!-- <Bannerimagenfull/>
    <NavInterno/> -->
    <section class="tabs-section">
      <img
        src="banner_servicios.png"
        alt="Video institucional"
        class="video-img"
      />
      <!-- TABS -->
      <div class="tabs">
        <button class="tab active" data-target="aves">AVES</button>
        <button class="tab" data-target="porcinos">PORCINOS</button>
        <button class="tab" data-target="otros">OTROS</button>
      </div>

      <!-- CONTENT -->
      <div class="content">
        <!-- AVES -->
        <div id="aves" class="tab-content active">
          {
            servicesData.aves.categories.map((cat, index) => (
              <div class="accordion-group">
                <button
                  class="accordion-header main-category"
                  data-index={`aves-${index}`}
                >
                  {cat.title}
                </button>
                <div class="accordion-panel main-panel">
                  {cat.subsections.map((sub, subIndex) => (
                    <div class="sub-accordion">
                      <button
                        class="sub-accordion-header"
                        data-subindex={`aves-${index}-${subIndex}`}
                      >
                        <span class="icon">+</span> {sub.title}
                      </button>
                      <div class="sub-accordion-panel">
                        <ul>
                          {sub.items.map((item) => (
                            <li>
                              -{" "}
                              <strong>
                                {item.label}
                                {item.desc ? ":" : ""}
                              </strong>{" "}
                              {item.desc}
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
          {
            /* Legacy or placeholder for header-only sections without subsections if any */
          }
        </div>

        <!-- PORCINOS -->
        <div id="porcinos" class="tab-content">
          {
            servicesData.porcinos.categories.map((cat, index) => (
              <div class="accordion-group">
                <button
                  class="accordion-header main-category"
                  data-index={`porcinos-${index}`}
                >
                  {cat.title}
                </button>
                <div class="accordion-panel main-panel">
                  {cat.subsections.map((sub, subIndex) => (
                    <div class="sub-accordion">
                      <button
                        class="sub-accordion-header"
                        data-subindex={`porcinos-${index}-${subIndex}`}
                      >
                        <span class="icon">+</span> {sub.title}
                      </button>
                      <div class="sub-accordion-panel">
                        <ul>
                          {sub.items.map((item) => (
                            <li>
                              -{" "}
                              <strong>
                                {item.label}
                                {item.desc ? ":" : ""}
                              </strong>{" "}
                              {item.desc}
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
        </div>

        <!-- OTROS -->
        <div id="otros" class="tab-content">
          {
            servicesData.otros.categories.map((cat, index) => (
              <div class="accordion-group">
                <button
                  class="accordion-header main-category"
                  data-index={`otros-${index}`}
                >
                  {cat.title}
                </button>
                <div class="accordion-panel main-panel">
                  {cat.subsections.map((sub, subIndex) => (
                    <div class="sub-accordion">
                      <button
                        class="sub-accordion-header"
                        data-subindex={`otros-${index}-${subIndex}`}
                      >
                        <span class="icon">+</span> {sub.title}
                      </button>
                      <div class="sub-accordion-panel">
                        <ul>
                          {sub.items.map((item) => (
                            <li>
                              -{" "}
                              <strong>
                                {item.label}
                                {item.desc ? ":" : ""}
                              </strong>{" "}
                              {item.desc}
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  /* Contenedor Principal (main) */
  .main-content {
    width: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .tabs-section {
    padding: 40px 20px;
    font-family: sans-serif;
    color: #006400;
  }

  /* TABS */
  .tabs {
    display: flex;
    justify-content: center;
    gap: 80px;
    margin-bottom: 40px;
    flex-wrap: wrap; /* responsive */
  }

  .tab {
    font-size: 32px;
    font-weight: 800;
    color: #006400;
    border: none;
    background: transparent;
    cursor: pointer;
    padding: 10px 20px;
    transition: all 0.3s ease;
  }

  .tab:hover {
    opacity: 0.8;
  }

  .tab.active {
    background: #006400;
    color: white;
  }

  /* CONTENT */
  .content {
    max-width: 1000px;
    margin: 0 auto;
    color: #006400;
  }

  .tab-content {
    display: none;
    animation: fade 0.3s ease-in-out;
  }

  .tab-content.active {
    display: block;
  }

  @keyframes fade {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ACCORDION STYLES */
  .accordion-header.main-category {
    background: none;
    border: none;
    border-bottom: 4px solid #006400;
    width: 100%;
    text-align: left;
    font-size: 28px;
    font-weight: 800;
    color: #006400;
    padding: 15px 0;
    cursor: pointer;
    margin-top: 20px;
    outline: none;
  }

  /* Make main headers clickable to toggle their whole section if desired, 
     or just static headers. User request implies subsections toggle. 
     Currently making main category just a header, but let's make it interactive 
     if user wants sections to collapse. 
     The request says: "en AVES cuando se le hace click a MICROBIOLOGIA se muestra las secciones que tienen un +"
     So the Main Category IS clickable.
  */

  .accordion-panel {
    display: none;
    overflow: hidden;
    padding-left: 10px;
  }

  .accordion-panel.active {
    display: block;
  }

  /* SUB-ACCORDION */
  .sub-accordion {
    margin: 15px 0;
  }

  .sub-accordion-header {
    background: none;
    border: none;
    color: #006400;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 5px 0;
    text-transform: uppercase;
  }

  .sub-accordion-panel {
    display: none;
    padding-left: 25px;
    font-size: 16px;
    line-height: 1.6;
  }

  .sub-accordion-panel.active {
    display: block;
  }

  .icon {
    font-weight: bold;
    display: inline-block;
    width: 20px;
  }

  h2 {
    margin: 25px 0 10px;
    font-size: 28px;
    font-weight: 800;
    border-bottom: 4px solid #006400;
    display: block;
    padding-bottom: 5px;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 10px 0;
  }

  li {
    margin-bottom: 8px;
  }

  .video-img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto 30px auto;
  }
</style>

<script>
  // Tab Switching Logic
  document.querySelectorAll(".tab").forEach((btn) => {
    btn.addEventListener("click", () => {
      // Remove active class from all tabs
      document
        .querySelectorAll(".tab")
        .forEach((t) => t.classList.remove("active"));
      // Add active class to clicked tab
      btn.classList.add("active");

      // Hide all tab contents
      document
        .querySelectorAll(".tab-content")
        .forEach((c) => c.classList.remove("active"));
      // Show target tab content
      const targetId = (btn as HTMLElement).dataset.target;
      document.getElementById(targetId).classList.add("active");
    });
  });

  // Main Accordion Logic (MICROBIOLOGÍA, etc.)
  document
    .querySelectorAll(".accordion-header.main-category")
    .forEach((header) => {
      header.addEventListener("click", () => {
        // Toggle the panel next to it
        const panel = header.nextElementSibling;
        panel.classList.toggle("active");
      });
    });

  // Sub Accordion Logic (+ CASOS CLÍNICOS, etc.)
  document.querySelectorAll(".sub-accordion-header").forEach((header) => {
    header.addEventListener("click", () => {
      const panel = header.nextElementSibling;
      const icon = header.querySelector(".icon");

      if (panel.classList.contains("active")) {
        panel.classList.remove("active");
        icon.textContent = "+";
      } else {
        panel.classList.add("active");
        icon.textContent = "-";
      }
    });
  });
</script>
